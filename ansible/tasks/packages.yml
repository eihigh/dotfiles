---
- name: include brew formula list
  include_vars: vars/formula.yml
  tags:
    - brew_formula

- name: include pacman list
  include_vars: vars/pacman.yml
  tags:
    - pacman

- block:
  - name: manage formula
    homebrew:
      name: "{{ item.key }}"
      state: present
    with_dict: "{{ formula }}"
    tags:
      - brew_formula

  when: ansible_os_family == "Darwin"

- block:
  - name: manage pacman
    become: yes
    pacman:
      name: "{{ item.key }}"
      state: present
    with_dict: "{{ pacman }}"

  when: ansible_os_family == "Archlinux"
